<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <link rel="stylesheet" type="text/css" href="styles.css"> -->
	<link rel="stylesheet" type="text/css" href="responsive.css">

	<title>Cronometro</title>

</head>

<body>
    <!-- <div id="hora"></div> -->
	<section class="parent">
		<div class="cronometro container">
			<div class="child titulo">
                <h1>Cronometro</h1>
            </div>
			<div class="child display">
				<span class="" id="hms"></span><span id="ms"></span> 
			</div>
			<div class="child botones">
				<button class="boton start" id="crono_start">Start</button>
				<button class="boton stop" id="crono_stop">Stop</button>
				<button class="boton reset" id="crono_reset">Reset</button>
			</div>
		</div>
	</section>
    <script>
        document.getElementById("hms").innerHTML="00:00:00";
        document.getElementById("ms").innerHTML=".00"
        h = 0;
        m = 0;
        s = 0;
        ms = 0;
        document.getElementById('crono_start').addEventListener("click",cronometrar);
        document.getElementById('crono_stop').addEventListener("click",parar);
        document.getElementById('crono_reset').addEventListener("click",reiniciar);
            
        function cronometrar(){
            escribir();
            start_interval=setInterval(escribir,10);
            document.querySelector(".start").removeEventListener("click",cronometrar);
        }

        function escribir(){
            ms++;
            if (ms>99){s++;ms=0}
            if (s>59){m++;s=0}
            if (m>59){h++;s=0}
            if (h>24){alert('Pasaron mas de 24hs'),reiniciar()}

            var sAux, mAux, hAux, msAux
            if (ms<10){msAux="0"+ms}else{msAux=ms}
            if (s<10){sAux='0'+s;}else{sAux=s}
            if (m<10){mAux='0'+m;}else{mAux=m}
            if (h<10){hAux='0'+h;}else{hAux=h}
            document.getElementById('hms').innerHTML= hAux + ':' + mAux + ':' + sAux;
            document.getElementById("ms").innerHTML= "." + msAux;
        }

        function parar(){
            clearInterval(start_interval)
            document.querySelector(".start").addEventListener("click",cronometrar);

        }

        function reiniciar(){
            clearInterval(start_interval)
            document.getElementById("hms").innerHTML="00:00:00";
            document.getElementById("ms").innerHTML=".00";
            document.querySelector(".start").addEventListener("click",cronometrar);
            h = 0;
            m = 0;
            s = 0;
            ms = 0;
        }
    </script>
    <!-- ------------------------------------------------------- -->
    <section class="parent">
		<div class="cronometro container">
			<div class="child titulo">
                <h1>Temporizador</h1>
            </div>

			<div class="child display" id="container-temp-hms"></div>
		
            <div class="child forms">
                <form id="inputs">
                    <input min="0" type="number" id="input-h">
                    <input min="0" type="number" id="input-m">
                    <input min="0" type="number" id="input-s">
                </form>
            </div>
			
			<div class="child botones" id="botones">
				<button id="start" class="boton temp-start">Start</button>
				<!-- <button id="stop" class="boton temp-stop">Stop</button>
				<button id="reset" class="boton temp-reset">Reset</button> -->
			</div>
		</div>
	</section>
    

    <script>
        // mostrarHora= document.getElementById("hora")
        // // mostrarHora.innerHTML = hora.toLocaleDateString();
        // setInterval (()=>{
        //     let hora = new Date()
        //     mostrarHora.innerHTML = hora.toLocaleTimeString();
        // },1000 )
        
            temp_h = 0;
            temp_m = 0;
            temp_s = 0;
            document.querySelector(".temp-start").addEventListener("click",timer_start);
            // document.querySelector(".temp-stop").addEventListener("click",timer_stop);
            // document.querySelector(".temp-reset").addEventListener("click",timer_reset);
        
        let is_running=false;
        function timer_start() {
            document.getElementById("container-temp-hms").innerHTML += '<span id="temp-hms"></span>'
            document.getElementById("temp-hms").innerHTML="00:00:00";
            
            document.getElementById("botones").innerHTML += '<button id="stop" class="boton temp-stop">Stop</button>';
            document.getElementById("botones").innerHTML += '<button id="reset" class="boton temp-reset">Reset</button>';
            document.querySelector(".temp-stop").addEventListener("click",timer_stop);
            document.querySelector(".temp-reset").addEventListener("click",timer_reset);
            const btn_start = document.getElementById('start')
            btn_start.remove()
            //----------------------------------------------------------//
            temp_h = parseInt(document.getElementById("input-h").value) || 0; //parseInt convierte el input a entero, y si esta vacio es igual a 0
            temp_m = parseInt(document.getElementById("input-m").value) || 0;
            temp_s = parseInt(document.getElementById("input-s").value) || 0;
            timer_interval = setInterval(escribir_timer, 1000);
            // document.querySelector(".temp-start").removeEventListener("click", timer_start);

            // const form_inputs = document.getElementById('inputs')
            // form_inputs.innerHTML= " "
            document.getElementById("inputs").style.display='none'
            is_running=true
        }
        
        function escribir_timer() {
            if (temp_s>0){
                temp_s--;
            }else {
                if (temp_m>0){
                    temp_s=59;temp_m--;
                }else{
                    if (temp_h>0){
                        temp_h--;temp_s=59;temp_m=59;
                    }else {
                        alert("Timer Finalizado")
                        timer_stop()
                    }
                }
            }
            let temp_hAux = temp_h < 10 ? '0' + temp_h : temp_h;
            let temp_mAux = temp_m < 10 ? '0' + temp_m : temp_m;
            let temp_sAux = temp_s < 10 ? '0' + temp_s : temp_s;

            document.getElementById('temp-hms').innerHTML = temp_hAux + ':' + temp_mAux + ':' + temp_sAux;
        }
        

        function timer_stop(){
            
            if (is_running){
                clearInterval(timer_interval)
                document.getElementById('stop').textContent = "Play"
                timer_reset()
            }else{
                timer_interval = setInterval(escribir_timer, 1000);
                document.getElementById('stop').textContent = "Stoop"

            }
            is_running=!is_running

            // document.querySelector(".temp-start").addEventListener("click",timer_start);
        }

        function timer_reset(){
            document.getElementById("botones").innerHTML += '<button id="start" class="boton temp-start">Start</button>';
            document.getElementById("container-temp-hms").innerHTML = ''
            const btn_stop = document.getElementById('stop');
            const btn_reset = document.getElementById('reset');
            btn_reset.remove();
            btn_stop.remove();

            clearInterval(timer_interval)
            // document.getElementById("temp-hms").innerHTML="00:00:00";
            document.querySelector(".temp-start").addEventListener("click",timer_start);
           
            // const form_inputs = document.getElementById('inputs')
            // form_inputs.innerHTML += '<input type="number" id="input-h"><input type="number" id="input-m"><input type="number" id="input-s">'
            document.getElementById("inputs").style.display='inline'
            document.getElementById("inputs").reset()
        }

    </script>


	<footer>
		<div class="container_footer">
            <p><a target="_blank" href="https://github.com/AntMendez">amendezr@fi.uba.ar</a></p>
            <!-- <p><a href="file:///C:/Users/Sabrina/Desktop/Cronometro/temporizador.html">Temporizador</a></p>
            <p><a href="file:///C:/Users/Sabrina/Desktop/Cronometro/index.html">Cronometro</a></p> -->
        </div>
	</footer>

	<!-- <script src="script.js" ></script> -->
</body>

</html>